import{o as a,c as p,a as i,t as f,n as _,p as A,b as B,u as r,d as H,F as y,r as h,e as C,f as M,w as O,g as P,h as g,i as j}from"./vendor.90c6ba84.js";const F=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerpolicy&&(d.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?d.credentials="include":t.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(t){if(t.ep)return;t.ep=!0;const d=o(t);fetch(t.href,d)}};F();const x={edit:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0435\u0441\u0441\u0438\u044E",menu:"\u041C\u0435\u043D\u044E",changeSession:"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0435\u0441\u0441\u0438\u044E",saveSession:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0435\u0441\u0441\u0438\u044E",deleteProduct:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0442",addProduct:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0442"};var b=(s,e)=>{for(const[o,n]of e)s[o]=n;return s};const $=s=>(A("data-v-46ee77fa"),s=s(),B(),s),V=$(()=>i("div",{class:"user_avatar"},null,-1)),z=$(()=>i("div",{class:"id_and_text"},[i("p",{class:"id"},"3723022"),i("p",{class:"header_text"},"\u041A\u0430\u0440\u0442\u0430 \u0412\u0412")],-1)),q={class:"id_and_text"},K={class:"id"},G={class:"header_text"},J={props:{date:String,timeOpen:String,timeExit:String,saved:Boolean},setup(s){const e=s;return(o,n)=>(a(),p("div",{class:_(["header",[e.saved?"header_saved":"header_unsaved"]])},[V,z,i("div",q,[i("p",K,f(e.date),1),i("p",G,f(e.timeOpen)+" - "+f(e.timeExit),1)]),i("div",{class:_([e.saved?"saved":"unsaved"])},null,2)],2))}};var Q=b(J,[["__scopeId","data-v-46ee77fa"]]),E="/test-neurus/assets/sessions.1d19a316.svg";const R={class:"open_session"},U={class:"text"},W={class:"open_or_exit"},X={key:0,class:"time"},Y={key:1,class:"time"},Z=["title"],ee=["src"],se={props:{timeOpen:String,timeExit:String,name:String,saved:Boolean},setup(s){const e=s;return(o,n)=>(a(),p("div",R,[i("div",U,[i("p",W,f(s.name),1),s.name==="\u0412\u0445\u043E\u0434"?(a(),p("p",X,f(s.timeOpen),1)):(a(),p("p",Y,f(s.timeExit),1))]),i("button",{class:_([e.saved?"button_saved":"button"]),title:r(x).changeSession},[i("img",{class:"button_img",src:r(E)},null,8,ee)],10,Z)]))}};var D=b(se,[["__scopeId","data-v-5d8eb7e8"]]),te="/test-neurus/assets/trash.0487fb06.svg",N=[{id:111105,type:"take_off",timestamp:1634604672,trackId:30417,productName:"\u041E\u0440\u0435\u0445 \u0411\u0440\u0430\u0437\u0438\u043B\u044C\u0441\u043A\u0438\u0439 \u0441\u0443\u0448\u0451\u043D\u044B\u0439, 100\u0433",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111106,type:"put_on",timestamp:1634606230,productName:"\u0421\u0430\u043B\u0444\u0435\u0442\u043A\u0438 \u0434\u0435\u0442\u0441\u043A\u0438\u0435, 50\u0448\u0442",productCount:1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111107,type:"take_off",timestamp:1634623962,productName:"\u041C\u0430\u0442\u0447\u0430 \u043B\u0430\u0442\u0442\u0435, 100\u0433",productCount:-10,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111108,type:"put_on",timestamp:1634623963,productName:"\u041C\u0430\u0442\u0447\u0430 \u043B\u0430\u0442\u0442\u0435, 100\u0433",productCount:1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111109,type:"take_off",timestamp:1634624212,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-9,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111110,type:"take_off",timestamp:1634624256,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-4,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111111,type:"put_on",timestamp:1634624436,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111112,type:"take_off",timestamp:1634624489,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:-1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111113,type:"put_on",timestamp:1634624497,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111114,type:"take_off",timestamp:1634624851,productName:"\u0422\u043E\u043C\u0430\u0442\u044B \u0432\u044F\u043B\u0435\u043D\u043D\u044B\u0435 \u0432 \u043C\u0430\u0441\u043B\u0435, 240\u0433",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111115,type:"put_on",timestamp:1634624985,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:1,state:"initial",sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111116,type:"take_off",timestamp:1634625399,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111117,type:"put_on",timestamp:1634625809,productName:"\u0421\u0430\u043B\u0444\u0435\u0442\u043A\u0438 \u0434\u0435\u0442\u0441\u043A\u0438\u0435, 50\u0448\u0442",productCount:1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111118,type:"put_on",timestamp:1634625812,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111119,type:"take_off",timestamp:1634625964,productName:"\u0421\u0430\u043B\u0444\u0435\u0442\u043A\u0438 \u0434\u0435\u0442\u0441\u043A\u0438\u0435, 50\u0448\u0442",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111120,type:"take_off",timestamp:1634626045,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111121,type:"put_on",timestamp:1634626306,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111122,type:"put_on",timestamp:1634626666,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111123,type:"take_off",timestamp:1634626689,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111124,type:"put_on",timestamp:1634627710,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:2,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111125,type:"take_off",timestamp:1634627714,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-2,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111126,type:"take_off",timestamp:1634627878,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111127,type:"put_on",timestamp:1634627917,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"}],k=[{id:4750,type:"open",timestamp:1634643425,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:4757,type:"exit",timestamp:1634643732,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:4752,type:"open",timestamp:1634643558,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:4755,type:"exit",timestamp:1634643669,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:4756,type:"open",timestamp:1634624193,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:4735,type:"exit",timestamp:1634643677,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"}];const oe=N.map(s=>s.sessionId),ne=k.map(s=>s.sessionId),de=new Set(oe.concat(ne)),ie=[...de].map(s=>{var c,l;const e=(c=k.find(u=>u.type==="open"&&u.sessionId===s))==null?void 0:c.timestamp,o=(l=k.find(u=>u.type==="exit"&&u.sessionId===s))==null?void 0:l.timestamp,n=N.filter(u=>u.sessionId===s).map(u=>u.productName),d=[...new Set(n)].map(u=>{const L=N.filter(I=>I.sessionId===s&&I.productName===u).map(I=>I.productCount).reduce((I,T)=>I-T,0);return{name:u,count:L}});return{sessionId:s,sessionOpen:e,sessionExit:o,products:d,saved:!1,openedProductsPopup:!1}}),m=H({state:{initialSate:ie},getters:{sessions:s=>s.initialSate,products:s=>new Set(s.initialSate.map(e=>e.products.map(o=>o.name)).flat())},mutations:{increment(s,e){const o=S(s,e.sessionId,e.product.name);o.count++},decrement(s,e){const o=S(s,e.sessionId,e.product.name);o.count--},openClosePopupProductsPopup(s,e){const o=v(s,e.sessionId),n=s.initialSate.indexOf(o);s.initialSate[n].openedProductsPopup=!s.initialSate[n].openedProductsPopup},addProduct(s,e){const o=v(s,e.sessionId),n=s.initialSate.indexOf(o),t=S(s,e.sessionId,e.product);t?t.count++:s.initialSate[n].products.push({name:e.product,count:1})},deleteProduct(s,e){const o=v(s,e.sessionId),n=s.initialSate.indexOf(o),t=S(s,e.sessionId,e.product.name),d=s.initialSate[n].products.indexOf(t);s.initialSate[n].products.splice(d,1)},drugAndDropProduct(s,e){const o=e.evt.dataTransfer.getData("sessionId"),n=v(s,o),t=v(s,e.sessionId),d=e.evt.dataTransfer.getData("productIndex"),[c]=n.products.splice(d,1);t.products.splice(-1,0,c)},saveSession(s,e){const o=v(s,e.sessionId),n=s.initialSate.indexOf(o);s.initialSate[n].saved=!0}}});function v(s,e){return s.initialSate.find(o=>o.sessionId===e)}function S(s,e,o){return v(s,e).products.find(n=>n.name===o)}const ce={class:"product"},re={class:"product_name"},ae={class:"count_and_buttons"},ue=["title"],pe=["src"],_e=["title"],me=["src"],le={props:{product:Object,sessionId:String,saved:Boolean},setup(s){const e=s;function o(){m.commit("increment",{sessionId:e.sessionId,product:e.product})}function n(){m.commit("decrement",{sessionId:e.sessionId,product:e.product})}function t(){m.commit("deleteProduct",{sessionId:e.sessionId,product:e.product})}return(d,c)=>(a(),p("div",ce,[i("p",re,f(e.product.name),1),i("div",ae,[i("button",{class:_([e.saved?"button_saved":"button button_delete"]),type:"button",onClick:t,title:r(x).deleteProduct},[i("img",{class:"button_img",src:r(te)},null,8,pe)],10,ue),i("button",{class:_([e.saved?"button_saved":"button button_change_count"]),onClick:n}," \u2013 ",2),i("p",{class:_([e.saved?"product_count product_count_saved":"product_count"])},f(e.product.count),3),i("button",{class:_([e.saved?"button_saved":"button button_change_count"]),onClick:o}," + ",2),i("button",{class:_(["drag_handle",[e.saved?"button_saved":"button button_change_session"]]),title:r(x).changeSession},[i("img",{class:"button_img",src:r(E)},null,8,me)],10,_e)])]))}};var fe=b(le,[["__scopeId","data-v-42c00457"]]);const be={props:{products:Object,sessionId:String,saved:Boolean},setup(s){const e=s;function o(n,t){n.dataTransfer.dropEffect="move",n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("productIndex",t),n.dataTransfer.setData("sessionId",e.sessionId)}return(n,t)=>(a(),p("div",{class:_([e.products.filter(d=>d.count>0).length===0?"products products_zero":"products"]),onDrop:t[0]||(t[0]=d=>r(m).commit("drugAndDropProduct",{evt:d,sessionId:e.sessionId})),onDragover:t[1]||(t[1]=O(()=>{},["prevent"])),onDragenter:t[2]||(t[2]=O(()=>{},["prevent"]))},[(a(!0),p(y,null,h(e.products,(d,c)=>(a(),p("div",{key:c},[d.count>0?(a(),C(fe,{key:0,product:d,sessionId:e.sessionId,saved:e.saved,onDragstart:l=>o(l,c),draggable:"true"},null,8,["product","sessionId","saved","onDragstart"])):M("",!0)]))),128))],34))}};var ve=b(be,[["__scopeId","data-v-543b7a64"]]);const Ie={class:"product"},ye={props:{sessionId:String,product:String},setup(s){const e=s;function o(){m.commit("addProduct",{sessionId:e.sessionId,product:e.product}),m.commit("openClosePopupProductsPopup",{sessionId:e.sessionId})}return(n,t)=>(a(),p("div",Ie,[i("button",{class:"button_add",onClick:o},f(e.product),1)]))}};var ge=b(ye,[["__scopeId","data-v-7e274c30"]]);const xe={props:{session:Object},setup(s){const e=s,o=m.getters.products;return(n,t)=>(a(),p(y,null,[i("div",{class:_([e.session.openedProductsPopup?"overlay overlay_opened":"overlay"]),onClick:t[0]||(t[0]=d=>r(m).commit("openClosePopupProductsPopup",{sessionId:e.session.sessionId}))},null,2),i("div",{class:_([e.session.openedProductsPopup?"popup popup_opened":"popup"])},[i("button",{class:"button_close",onClick:t[1]||(t[1]=d=>r(m).commit("openClosePopupProductsPopup",{sessionId:e.session.sessionId}))}),(a(!0),p(y,null,h(r(o),(d,c)=>(a(),C(ge,{key:c,product:d,sessionId:e.session.sessionId},null,8,["product","sessionId"]))),128))],2)],64))}};var Pe=b(xe,[["__scopeId","data-v-da735738"]]);const Se=["title"],he=["title"],Ce={props:{session:Object},setup(s){const e=s,o="_";let n,t=o;if(e.session.sessionOpen){const c=e.session.sessionOpen;t=P(new Date(c*1e3),"HH:mm:ss"),n=P(new Date(c*1e3),"dd.MM.yyyy")}let d=o;if(e.session.sessionExit){const c=e.session.sessionExit;d=P(new Date(c*1e3),"HH:mm:ss"),n=P(new Date(c*1e3),"dd.MM.yyyy")}return(c,l)=>(a(),p(y,null,[i("main",{class:_(["main",[e.session.saved?"main_saved":"main_unsaved"]])},[g(Q,{date:r(n),timeOpen:r(t),timeExit:r(d),saved:e.session.saved},null,8,["date","timeOpen","timeExit","saved"]),g(D,{timeOpen:r(t),name:"\u0412\u0445\u043E\u0434",saved:e.session.saved},null,8,["timeOpen","saved"]),g(ve,{products:e.session.products,sessionId:e.session.sessionId,saved:e.session.saved},null,8,["products","sessionId","saved"]),g(D,{timeExit:r(d),name:"\u0412\u044B\u0445\u043E\u0434",saved:e.session.saved},null,8,["timeExit","saved"]),i("div",{class:_([e.session.saved?"buttons_saved":"buttons"])},[i("button",{class:"button button_add",onClick:l[0]||(l[0]=u=>r(m).commit("openClosePopupProductsPopup",{sessionId:e.session.sessionId})),title:r(x).addProduct}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0442 ",8,Se),i("button",{class:"button button_save",onClick:l[1]||(l[1]=u=>r(m).commit("saveSession",{sessionId:e.session.sessionId})),title:r(x).saveSession}," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ",8,he)],2)],2),g(Pe,{session:e.session},null,8,["session"])],64))}};var Ne=b(Ce,[["__scopeId","data-v-6712e294"]]);const ke={setup(s){return(e,o)=>(a(!0),p(y,null,h(r(m).getters.sessions,(n,t)=>(a(),C(Ne,{key:t,session:n},null,8,["session"]))),128))}},w=j(ke);w.use(m);w.mount("#app");
