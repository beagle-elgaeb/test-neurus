import{o as p,c as m,a as c,t as f,n as l,p as T,b as A,d as B,u,F as g,r as h,e as N,f as M,w as $,g as x,h as P,i as H}from"./vendor.90c6ba84.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};j();const S={edit:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0435\u0441\u0441\u0438\u044E",menu:"\u041C\u0435\u043D\u044E",changeSession:"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0435\u0441\u0441\u0438\u044E",saveSession:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0435\u0441\u0441\u0438\u044E",deleteProduct:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0442",addProduct:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0442"};var b=(s,e)=>{for(const[t,d]of e)s[t]=d;return s};const E=s=>(T("data-v-46ee77fa"),s=s(),A(),s),F=E(()=>c("div",{class:"user_avatar"},null,-1)),V=E(()=>c("div",{class:"id_and_text"},[c("p",{class:"id"},"3723022"),c("p",{class:"header_text"},"\u041A\u0430\u0440\u0442\u0430 \u0412\u0412")],-1)),z={class:"id_and_text"},q={class:"id"},K={class:"header_text"},G={props:{date:String,timeOpen:String,timeExit:String,saved:Boolean},setup(s){const e=s;return(t,d)=>(p(),m("div",{class:l(["header",[e.saved?"header_saved":"header_unsaved"]])},[F,V,c("div",z,[c("p",q,f(e.date),1),c("p",K,f(e.timeOpen)+" - "+f(e.timeExit),1)]),c("div",{class:l([e.saved?"saved":"unsaved"])},null,2)],2))}};var J=b(G,[["__scopeId","data-v-46ee77fa"]]);const Q={class:"open_session"},R={class:"text"},U={class:"open_or_exit"},W={key:0,class:"time"},X={key:1,class:"time"},Y={props:{timeOpen:String,timeExit:String,name:String,saved:Boolean},setup(s){return(e,t)=>(p(),m("div",Q,[c("div",R,[c("p",U,f(s.name),1),s.name==="\u0412\u0445\u043E\u0434"?(p(),m("p",W,f(s.timeOpen),1)):(p(),m("p",X,f(s.timeExit),1))])]))}};var D=b(Y,[["__scopeId","data-v-24bbdc48"]]),Z="/test-neurus/assets/trash.0487fb06.svg",k=[{id:111105,type:"take_off",timestamp:1634604672,trackId:30417,productName:"\u041E\u0440\u0435\u0445 \u0411\u0440\u0430\u0437\u0438\u043B\u044C\u0441\u043A\u0438\u0439 \u0441\u0443\u0448\u0451\u043D\u044B\u0439, 100\u0433",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111106,type:"put_on",timestamp:1634606230,productName:"\u0421\u0430\u043B\u0444\u0435\u0442\u043A\u0438 \u0434\u0435\u0442\u0441\u043A\u0438\u0435, 50\u0448\u0442",productCount:1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111107,type:"take_off",timestamp:1634623962,productName:"\u041C\u0430\u0442\u0447\u0430 \u043B\u0430\u0442\u0442\u0435, 100\u0433",productCount:-10,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111108,type:"put_on",timestamp:1634623963,productName:"\u041C\u0430\u0442\u0447\u0430 \u043B\u0430\u0442\u0442\u0435, 100\u0433",productCount:1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111109,type:"take_off",timestamp:1634624212,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-9,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111110,type:"take_off",timestamp:1634624256,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-4,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111111,type:"put_on",timestamp:1634624436,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111112,type:"take_off",timestamp:1634624489,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:-1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111113,type:"put_on",timestamp:1634624497,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111114,type:"take_off",timestamp:1634624851,productName:"\u0422\u043E\u043C\u0430\u0442\u044B \u0432\u044F\u043B\u0435\u043D\u043D\u044B\u0435 \u0432 \u043C\u0430\u0441\u043B\u0435, 240\u0433",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111115,type:"put_on",timestamp:1634624985,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:1,state:"initial",sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111116,type:"take_off",timestamp:1634625399,productName:"\u041A\u043E\u043D\u0444\u0435\u0442\u044B \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043D\u044B\u0435 \u0441 \u0444\u0443\u043D\u0434\u0443\u043A\u043E\u043C \u0438 \u043C\u043E\u0440\u043A\u043E\u0432\u044C\u044E, 150\u0433",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111117,type:"put_on",timestamp:1634625809,productName:"\u0421\u0430\u043B\u0444\u0435\u0442\u043A\u0438 \u0434\u0435\u0442\u0441\u043A\u0438\u0435, 50\u0448\u0442",productCount:1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111118,type:"put_on",timestamp:1634625812,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111119,type:"take_off",timestamp:1634625964,productName:"\u0421\u0430\u043B\u0444\u0435\u0442\u043A\u0438 \u0434\u0435\u0442\u0441\u043A\u0438\u0435, 50\u0448\u0442",productCount:-1,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:111120,type:"take_off",timestamp:1634626045,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111121,type:"put_on",timestamp:1634626306,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111122,type:"put_on",timestamp:1634626666,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111123,type:"take_off",timestamp:1634626689,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-1,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111124,type:"put_on",timestamp:1634627710,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:2,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111125,type:"take_off",timestamp:1634627714,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-2,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:111126,type:"take_off",timestamp:1634627878,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:-1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:111127,type:"put_on",timestamp:1634627917,productName:"\u041A\u0430\u043B\u044C\u0446\u0438\u0439 d3, 137\u0433",productCount:1,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"}],O=[{id:4750,type:"open",timestamp:1634643425,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:4757,type:"exit",timestamp:1634643732,sessionId:"143c1ddd-be57-4644-ae9a-6b16fee9078b"},{id:4752,type:"open",timestamp:1634643558,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:4755,type:"exit",timestamp:1634643669,sessionId:"6822d3db-a766-499f-b6ca-b9d6382c94b0"},{id:4756,type:"open",timestamp:1634624193,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"},{id:4735,type:"exit",timestamp:1634643677,sessionId:"f159363a-6dc9-46b1-87f5-cf82bc145e48"}];const ee=k.map(s=>s.sessionId),se=O.map(s=>s.sessionId),te=new Set(ee.concat(se)),oe=[...te].map(s=>{var i,a;const e=(i=O.find(r=>r.type==="open"&&r.sessionId===s))==null?void 0:i.timestamp,t=(a=O.find(r=>r.type==="exit"&&r.sessionId===s))==null?void 0:a.timestamp,d=k.filter(r=>r.sessionId===s).map(r=>r.productName),n=[...new Set(d)].map(r=>{const y=k.filter(I=>I.sessionId===s&&I.productName===r).map(I=>I.productCount).reduce((I,L)=>I-L,0);return{name:r,count:y}});return{sessionId:s,sessionOpen:e,sessionExit:t,products:n,saved:!1,openedProductsPopup:!1}}),_=B({state:{initialSate:oe},getters:{sessions:s=>s.initialSate,products:s=>new Set(s.initialSate.map(e=>e.products.map(t=>t.name)).flat())},mutations:{increment(s,e){const t=C(s,e.sessionId,e.product.name);t.count++},decrement(s,e){const t=C(s,e.sessionId,e.product.name);t.count--},openClosePopupProductsPopup(s,e){const t=v(s,e.sessionId),d=s.initialSate.indexOf(t);s.initialSate[d].openedProductsPopup=!s.initialSate[d].openedProductsPopup},addProduct(s,e){const t=v(s,e.sessionId),d=s.initialSate.indexOf(t),o=C(s,e.sessionId,e.product);o?o.count++:s.initialSate[d].products.push({name:e.product,count:1})},deleteProduct(s,e){const t=v(s,e.sessionId),d=s.initialSate.indexOf(t),o=C(s,e.sessionId,e.product.name),n=s.initialSate[d].products.indexOf(o);s.initialSate[d].products.splice(n,1)},drugAndDropProduct(s,e){const t=e.evt.dataTransfer.getData("sessionId"),d=v(s,t),o=v(s,e.sessionId),n=e.evt.dataTransfer.getData("productIndex"),[i]=d.products.splice(n,1),a=o.products.find(r=>r.name===i.name);a?a.count=a.count+i.count:o.products.splice(-1,0,i)},saveSession(s,e){const t=v(s,e.sessionId),d=s.initialSate.indexOf(t);s.initialSate[d].saved=!0}}});function v(s,e){return s.initialSate.find(t=>t.sessionId===e)}function C(s,e,t){return v(s,e).products.find(d=>d.name===t)}const ne={class:"product"},de={class:"product_name"},ie={class:"count_and_buttons"},ce=["title"],re=["src"],ae=["title"],ue={props:{product:Object,sessionId:String,saved:Boolean},setup(s){const e=s;function t(){_.commit("increment",{sessionId:e.sessionId,product:e.product})}function d(){_.commit("decrement",{sessionId:e.sessionId,product:e.product})}function o(){_.commit("deleteProduct",{sessionId:e.sessionId,product:e.product})}return(n,i)=>(p(),m("div",ne,[c("p",de,f(e.product.name),1),c("div",ie,[c("button",{class:l([e.saved?"button_saved":"button button_delete"]),type:"button",onClick:o,title:u(S).deleteProduct},[c("img",{class:"button_img",src:u(Z)},null,8,re)],10,ce),c("button",{class:l([e.saved?"button_saved":"button button_change_count"]),onClick:d}," \u2013 ",2),c("p",{class:l([e.saved?"product_count product_count_saved":"product_count"])},f(e.product.count),3),c("button",{class:l([e.saved?"button_saved":"button button_change_count"]),onClick:t}," + ",2),c("button",{class:l(["drag_handle",[e.saved?"button_saved":"button button_change_session"]]),title:u(S).changeSession},null,10,ae)])]))}};var pe=b(ue,[["__scopeId","data-v-5dd26950"]]);const me={props:{products:Object,sessionId:String,saved:Boolean},setup(s){const e=s;let t=!1;function d(n){t=n.target}function o(n,i){t.classList.contains("drag_handle")?(n.dataTransfer.dropEffect="move",n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("productIndex",i),n.dataTransfer.setData("sessionId",e.sessionId)):n.preventDefault()}return(n,i)=>(p(),m("div",{class:l([e.products.filter(a=>a.count>0).length===0?"products products_zero":"products"]),onDrop:i[1]||(i[1]=a=>u(_).commit("drugAndDropProduct",{evt:a,sessionId:e.sessionId})),onDragover:i[2]||(i[2]=$(()=>{},["prevent"])),onDragenter:i[3]||(i[3]=$(()=>{},["prevent"]))},[(p(!0),m(g,null,h(e.products,(a,r)=>(p(),m("div",{key:r},[a.count>0?(p(),N(pe,{key:0,product:a,sessionId:e.sessionId,saved:e.saved,onDragstart:y=>o(y,r),onMousedown:i[0]||(i[0]=y=>d(y)),draggable:"true"},null,8,["product","sessionId","saved","onDragstart"])):M("",!0)]))),128))],34))}};var _e=b(me,[["__scopeId","data-v-cbedb55c"]]);const le={class:"product"},fe={props:{sessionId:String,product:String},setup(s){const e=s;function t(){_.commit("addProduct",{sessionId:e.sessionId,product:e.product}),_.commit("openClosePopupProductsPopup",{sessionId:e.sessionId})}return(d,o)=>(p(),m("div",le,[c("button",{class:"button_add",onClick:t},f(e.product),1)]))}};var be=b(fe,[["__scopeId","data-v-7e274c30"]]);const ve={props:{session:Object},setup(s){const e=s,t=_.getters.products;return(d,o)=>(p(),m(g,null,[c("div",{class:l([e.session.openedProductsPopup?"overlay overlay_opened":"overlay"]),onClick:o[0]||(o[0]=n=>u(_).commit("openClosePopupProductsPopup",{sessionId:e.session.sessionId}))},null,2),c("div",{class:l([e.session.openedProductsPopup?"popup popup_opened":"popup"])},[c("button",{class:"button_close",onClick:o[1]||(o[1]=n=>u(_).commit("openClosePopupProductsPopup",{sessionId:e.session.sessionId}))}),(p(!0),m(g,null,h(u(t),(n,i)=>(p(),N(be,{key:i,product:n,sessionId:e.session.sessionId},null,8,["product","sessionId"]))),128))],2)],64))}};var Ie=b(ve,[["__scopeId","data-v-da735738"]]);const ye=["title"],ge=["title"],Pe={props:{session:Object},setup(s){const e=s,t="_";let d,o=t;if(e.session.sessionOpen){const i=e.session.sessionOpen;o=x(new Date(i*1e3),"HH:mm:ss"),d=x(new Date(i*1e3),"dd.MM.yyyy")}let n=t;if(e.session.sessionExit){const i=e.session.sessionExit;n=x(new Date(i*1e3),"HH:mm:ss"),d=x(new Date(i*1e3),"dd.MM.yyyy")}return(i,a)=>(p(),m(g,null,[c("main",{class:l(["main",[e.session.saved?"main_saved":"main_unsaved"]])},[P(J,{date:u(d),timeOpen:u(o),timeExit:u(n),saved:e.session.saved},null,8,["date","timeOpen","timeExit","saved"]),P(D,{timeOpen:u(o),name:"\u0412\u0445\u043E\u0434",saved:e.session.saved},null,8,["timeOpen","saved"]),P(_e,{products:e.session.products,sessionId:e.session.sessionId,saved:e.session.saved},null,8,["products","sessionId","saved"]),P(D,{timeExit:u(n),name:"\u0412\u044B\u0445\u043E\u0434",saved:e.session.saved},null,8,["timeExit","saved"]),c("div",{class:l([e.session.saved?"buttons_saved":"buttons"])},[c("button",{class:"button button_add",onClick:a[0]||(a[0]=r=>u(_).commit("openClosePopupProductsPopup",{sessionId:e.session.sessionId})),title:u(S).addProduct}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0442 ",8,ye),c("button",{class:"button button_save",onClick:a[1]||(a[1]=r=>u(_).commit("saveSession",{sessionId:e.session.sessionId})),title:u(S).saveSession}," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ",8,ge)],2)],2),P(Ie,{session:e.session},null,8,["session"])],64))}};var xe=b(Pe,[["__scopeId","data-v-6712e294"]]);const Se={setup(s){return(e,t)=>(p(!0),m(g,null,h(u(_).getters.sessions,(d,o)=>(p(),N(xe,{key:o,session:d},null,8,["session"]))),128))}},w=H(Se);w.use(_);w.mount("#app");
